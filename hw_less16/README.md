### домашняя работа 16
#### Домашнее задание  
Настраиваем центральный сервер для сбора логов
в вагранте поднимаем 2 машины web и log
на web поднимаем nginx
на log настраиваем центральный лог сервер на любой системе на выбор
- journald
- rsyslog
- elk
настраиваем аудит следящий за изменением конфигов нжинкса

все критичные логи с web должны собираться и локально и удаленно
все логи с nginx должны уходить на удаленный сервер (локально только критичные)
логи аудита должны также уходить на удаленную систему


* развернуть еще машину elk
и таким образом настроить 2 центральных лог системы elk И какую либо еще
в elk должны уходить только логи нжинкса
во вторую систему все остальное   

## ДР:  
Vagrant поднимает 4 машины:  
- log0 - ELK (192.168.11.103)
- log1 - rsyslog (192.168.11.104)
- web0 - nginx (192.168.11.101)
- doc0 - docker + nginx  (192.168.11.102)

Log0 собирает логи aceess и error с серверов web0 и log0 используя Filebeat  
Log0 собирает логи auditd с сервера web0 используя auditbeat  
Log1 собирает aduitd логи с сервера doc0 через rsyslog  

Как работает:
```  
cd ansible 
vagrant up
ansible-playbook playbook/inf.yml
```
После того, как отработает ansible заходим на вэб сервера, что бы сгенерить логи:
- http://192.168.11.101/
- http://192.168.11.103/   

зходим через vagrant ssh на сервер web0 и выполняем просмотр nginx.conf , что бы сгенерить логи для auditbeat
```
cat /etc/nginx/nginx.conf
```
Проверяем получение логов на ELK http://192.168.11.102:5601  
Заходим на сервер web через vagrant ssh , что бы сгенерить логи auditd для отправки на rsyslog (log1)  
На сервере log1 в папке /var/log/rsyslog/doc1/audit.log - логи auditd с сервера doc0

